@model WeddingFinder.ViewModels.ListBusinessFormViewModel
@{
    ViewData["Title"] = "List Business";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section Scripts {
    @{ await Html.RenderPartialAsync("_ValidationScriptsPartial"); }
}

<div class="container-fluid whyList">
    <div class="container whyListContainer">
        <div class="whyListTitle">
            Why List With The Wedding Finder
            <hr />
        </div>
        <div class="whyListBody">
            Well for starters, every listing is Free! Yes you read correctly, Free! No Lock in, upfront, hefty monthly payments.
            We believe every Wedding business should be given the opportunity to be listed on a Wedding Finder regardless if you are a start-up or a well established business. Your customer wants options and the Wedding Finder gives your customers just that!
            So what are you waiting for? Sign up and get your business listed on The Wedding Finder! 
        </div>
    </div>
</div>
<div class="container-fluid listBusiness">
    <div class="row">
        <div class="col-md-2">
        </div>
        <div class="col-md-8 listBusinessContainer">
            <div class="listBusinessTitle">
                List Your Business With Us
            </div>
            <div class="listBusinessForm">
                <form asp-action="SubmitForm" asp-controller="ListBusiness">
                    <div class="form-row">
                        <div class="col-md-1">
                        </div>
                        <div class="form-group col-md-5">
                            <label asp-for="FirstName"></label>
                            <input asp-for="FirstName" class="form-control">
                            <span asp-validation-for="FirstName" class="text-danger"></span>
                        </div>
                        <div class="form-group col-md-5">
                            <label asp-for="LastName"></label>
                            <input asp-for="LastName" class="form-control">
                            <span asp-validation-for="LastName" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-md-1">
                        </div>
                        <div class="form-group col-md-5">
                            <label asp-for="Email"></label>
                            <input asp-for="Email" class="form-control">
                            <span asp-validation-for="Email" class="text-danger"></span>
                        </div>
                        <div class="form-group col-md-5">
                            <label asp-for="ContactNumber"></label>
                            <input asp-for="ContactNumber" class="form-control">
                            <span asp-validation-for="ContactNumber" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="col-md-1">
                        </div>
                        <div class="form-group col-md-5">
                            <label asp-for="Street"></label>
                            <input asp-for="Street" class="form-control">
                            <span asp-validation-for="Street" class="text-danger"></span>
                        </div>
                        <div class="form-group col-md-5">
                            <label asp-for="Suburb"></label>
                            <input asp-for="Suburb" class="form-control">
                            <span asp-validation-for="Suburb" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-md-1">
                        </div>
                        <div class="form-group col-md-3">
                            <label asp-for="Postcode"></label>
                            <input asp-for="Postcode" class="form-control">
                            <span asp-validation-for="Postcode" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-md-1">
                        </div>
                        <div class="form-group col-md-5">
                            <label asp-for="State"></label>
                            <select asp-for="State"
                                    asp-items="@(new SelectList(Model.StateList,"StateId", "StateDisplayName"))" class="form-control stateBox">
                                <option value="">Please select one</option>
                            </select>
                            <span asp-validation-for="State" class="text-danger"></span>
                        </div>
                        <div class="form-group col-md-5">
                            <label asp-for="Region"></label>
                            <select asp-for="Region"
                                    class="form-control" id="listBusinessRegionBox">
                                <option value="">Please select one</option>
                            </select>
                            <span asp-validation-for="Region" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="form-row" style="padding-bottom:30px;padding-top:15px;">
                        <div class="col-md-1">
                        </div>
                        <div class="col-md-5">
                            Does your business service more than one region?
                        </div>
                        <div class="form-check col-md-3">
                            <input type="radio" asp-for="HasSeveralRegions" value="false" id="servicedRegionsRadio1"/>
                            <label class="form-check-label" for="servicedRegionsRadio1">
                                One Region
                            </label>
                        </div>
                        <div class="form-check col-md-3">
                            <input type="radio" asp-for="HasSeveralRegions" value="true" id="servicedRegionsRadio2"/>
                            <label class="form-check-label" for="servicedRegionsRadio2">
                                Several Regions
                            </label>
                        </div>
                    </div>
                    <div class="form-row" id="servicedRegionsRow" hidden>
                        <div class="col-md-1">
                        </div>
                        <div class="form-group col-md-10">
                            <label asp-for="ServicedRegions"></label>
                            <select asp-for="ServicedRegions" class="form-control" id="servicedRegionsBox" multiple="multiple"></select>
                        </div>
                        <div class="col-md-1">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-md-1">
                        </div>
                        <div class="form-group col-md-5">
                            <label asp-for="BusinessName"></label>
                            <input asp-for="BusinessName" class="form-control">
                            <span asp-validation-for="BusinessName" class="text-danger"></span>
                        </div>
                        <div class="form-group col-md-5">
                            <label asp-for="Category"></label>
                            <select asp-for="Category"
                                    asp-items="@(new SelectList(Model.CategoryList,"CategoryId", "CategoryName"))" class="form-control">
                                <option value="">Please select one</option>
                            </select>
                            <span asp-validation-for="Category" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-md-1">
                        </div>
                        <div class="form-group col-md-5">
                            <label asp-for="Instagram"></label>
                            <input asp-for="Instagram" class="form-control">
                            <span asp-validation-for="Instagram" class="text-danger"></span>
                        </div>
                        <div class="form-group col-md-5">
                            <label asp-for="Facebook"></label>
                            <input asp-for="Facebook" class="form-control">
                            <span asp-validation-for="Facebook" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-md-1">
                        </div>
                        <div class="form-group col-md-5">
                            <label asp-for="Website"></label>
                            <input asp-for="Website" class="form-control">
                            <span asp-validation-for="Website" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-md-1">
                        </div>
                        <div class="form-group col-md-10">
                            <label asp-for="ShortDescription"></label>
                            <textarea asp-for="ShortDescription" class="form-control"></textarea>
                            <span asp-validation-for="ShortDescription" class="text-danger"></span>
                            <!--label for="listFormShortDesc">Enter a short description of your business. This will display on the Categories Listing Page (50 words max):</!--label>
            <textarea class="form-control" id="listFormShortDesc" rows="3"></textarea>-->
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-md-1">
                        </div>
                        <div class="form-group col-md-10">
                            <label asp-for="FullDescription"></label>
                            <textarea asp-for="FullDescription" class="form-control"></textarea>
                            <span asp-validation-for="FullDescription" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-md-1">
                        </div>
                        <div class="form-group">
                            <label asp-for="Upload"></label>
                            <input type="file" asp-for="Upload" />
                        </div>
                    </div>
                    <div class="form-row" style="padding-top:20px;">
                        <div class="col-md-1">
                        </div>
                        <div class="form-group col-md-6">
                            <label asp-for="TermsAndConditions"></label>
                            <input type="checkbox" asp-for="TermsAndConditions" class="form-control" style="width:20px;height:20px;">
                            <span asp-validation-for="TermsAndConditions" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="form-row" style="padding-top:10px;padding-bottom:30px;">
                        <div class="col-md-1">
                        </div>
                        <button type="submit" class="btn btn-primary">Submit Listing</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<script>
    var ListBusinessState = null;
    $(document).ready(function(){
        $("select.stateBox").change(function () {
            ListBusinessState = $(this).children("option:selected").val();
            console.log(ListBusinessState);
            console.log("Postback");
                $.ajax({
                url: "/ListBusiness/GetRegionsByStateID",
                data: { stateId: ListBusinessState },
                type: "Post",
                success: function (data) {
                    var baseOptions = '';
                    var defaultOption = '<option value="-1">Please select one</option>'; 
                    for (var i = 0; i < Object.keys(data).length; i++) {                        
                        baseOptions += '<option value="' + data[i].regionID + '">' + data[i].regionName + '</option>';
                        }
                $("#listBusinessRegionBox").html(defaultOption += baseOptions);
                $("#servicedRegionsBox").html(baseOptions);
                }
            });
            });
    });
    $(document).ready(function(){
        ListBusinessState = $("select.stateBox").children("option:selected").val();
        console.log(ListBusinessState);
        console.log("Postback");
            $.ajax({
            url: "/ListBusiness/GetRegionsByStateID",
            data: { stateId: ListBusinessState },
            type: "Post",
            success: function (data) {
                var baseOptions = '';
                var defaultOption = '<option value="-1">Please select one</option>'; 
                for (var i = 0; i < Object.keys(data).length; i++) {                        
                    baseOptions += '<option value="' + data[i].regionID + '">' + data[i].regionName + '</option>';
                    }
                $("#listBusinessRegionBox").html(defaultOption += baseOptions);
                $("#servicedRegionsBox").html(baseOptions);
            }
        });
    });
    $('#servicedRegionsRadio1').click(function() {
        if ($('input[name=HasSeveralRegions]:checked')) {            
            $('#servicedRegionsRow').attr("hidden", true);
        }        
    });
    $('#servicedRegionsRadio2').click(function() {
        if ($('input[name=HasSeveralRegions]:checked')) {            
            $('#servicedRegionsRow').removeAttr("hidden");
        }
    });
</script>